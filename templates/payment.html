<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <style>
        /* Centering alert message */
        .alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: #f44336;
            color: white;
            border-radius: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="alert" id="alertMessage"></div>
    
    <form id="paymentForm" action="/update_dataset" method="POST">
        <input type="hidden" name="seat_number" id="seatNumber">
        <input type="hidden" name="user_age" id="userAge">
        <input type="hidden" name="preferred_age_group" id="preferredAgeGroup">
        <input type="hidden" name="seat_booked" value="true">
        <button type="button" onclick="submitPayment()">Submit Payment</button>
    </form>

    <script>
        function showAlert(message) {
            const alert = document.getElementById('alertMessage');
            alert.innerText = message;
            alert.style.display = 'block';
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        function submitPayment() {
            const passengerDetails = JSON.parse(localStorage.getItem('passengerDetails'));
            const seatNumber = localStorage.getItem('selected_seat');
            const userAge = passengerDetails.age;
            const preferredAgeGroup = passengerDetails.age_group;

            if (!seatNumber) {
                showAlert("Missing data! Please select a seat");
                return;
            }

            if(!userAge){
                showAlert("Missing data!cUser Age");
                return;
            }

            if(!preferredAgeGroup){
                showAlert("Missing data! Prefereed age group");
                return;
            }

            document.getElementById('seatNumber').value = seatNumber;
            document.getElementById('userAge').value = userAge;
            document.getElementById('preferredAgeGroup').value = preferredAgeGroup;

            document.getElementById('paymentForm').submit();
        }
    </script>
</body>
</html>
